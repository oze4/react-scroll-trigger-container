(window["webpackJsonpreact-scroll-trigger-update"]=window["webpackJsonpreact-scroll-trigger-update"]||[]).push([[0],{14:function(e,t,n){e.exports=n(21)},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(6),i=n(9),l=n(7),s=n(10),a=n(0),c=n.n(a),u=n(8),h=n.n(u),d=n(3),p=n(12),m=n(1),f=n(2),b=n(4),v=n.n(b),g=n(13);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).onScrollThrottled=v()(n.onScroll.bind(Object(f.a)(n)),e.throttleScroll,{trailing:!1}),n.onResizeThrottled=v()(n.onResize.bind(Object(f.a)(n)),e.throttleResize,{trailing:!1}),n.state={isCustomContainerRef:!1,inViewport:!1,progress:0,lastScrollPosition:null,lastScrollTime:null},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.containerRef!==(document.documentElement||"html")?(this.setState({isCustomContainerRef:!0}),this.props.containerRef.addEventListener("resize",this.onResizeThrottled),this.props.containerRef.addEventListener("scroll",this.onScrollThrottled)):(addEventListener("resize",this.onResizeThrottled),addEventListener("scroll",this.onScrollThrottled)),this.props.triggerOnLoad&&this.checkStatus()}},{key:"componentDidUpdate",value:function(e,t){e.throttleScroll!==this.props.throttleScroll&&(this.onScrollThrottled=v()(this.onScroll.bind(this),this.props.throttleScroll,{trailing:!1}),this.state.isCustomContainerRef?(this.props.containerRef.removeEventListener("scroll",this.onScrollThrottled),this.props.containerRef.addEventListener("scroll",this.onScrollThrottled)):(removeEventListener("scroll",this.onScrollThrottled),addEventListener("scroll",this.onScrollThrottled))),e.throttleResize!==this.props.throttleResize&&(this.onResizeThrottled=v()(this.onResize.bind(this),this.props.throttleResize,{trailing:!1}),this.state.isCustomContainerRef?(this.props.containerRef.removeEventListener("resize",this.onResizeThrottled),this.props.containerRef.addEventListener("resize",this.onResizeThrottled)):(removeEventListener("resize",this.onResizeThrottled),addEventListener("resize",this.onResizeThrottled))),e.containerRef!==this.props.containerRef&&(this.props.containerRef!==(document.documentElement||"html")?(this.setState({isCustomContainerRef:!0}),removeEventListener("resize",this.onResizeThrottled),removeEventListener("scroll",this.onScrollThrottled),this.props.containerRef.addEventListener("resize",this.onResizeThrottled),this.props.containerRef.addEventListener("scroll",this.onScrollThrottled)):(this.setState({isCustomContainerRef:!1}),this.props.containerRef.removeEventListener("resize",this.onResizeThrottled),this.props.containerRef.removeEventListener("scroll",this.onScrollThrottled),addEventListener("resize",this.onResizeThrottled),addEventListener("scroll",this.onScrollThrottled)),this.checkStatus())}},{key:"componentWillUnmount",value:function(){this.state.isCustomContainerRef?(this.props.containerRef.removeEventListener("resize",this.onResizeThrottled),this.props.containerRef.removeEventListener("scroll",this.onScrollThrottled)):(removeEventListener("resize",this.onResizeThrottled),removeEventListener("scroll",this.onScrollThrottled))}},{key:"onResize",value:function(){this.checkStatus()}},{key:"onScroll",value:function(){this.checkStatus()}},{key:"checkStatus",value:function(){var e=this.props,t=e.containerRef,n=e.onEnter,r=e.onExit,o=e.onProgress,i=this.state,l=i.lastScrollPosition,s=i.lastScrollTime,a=h.a.findDOMNode(this.element).getBoundingClientRect(),c="string"===typeof t?document.querySelector(t):t,u=t===document.documentElement?Math.max(t.clientHeight,window.innerHeight||0):c.clientHeight,d=a.top<=u&&a.bottom>=0,p=this.state.isCustomContainerRef?t.scrollTop:window.scrollY,m=l&&s?Math.abs((l-p)/(s-Date.now())):null;if(d){var f=Math.max(0,Math.min(1,1-a.bottom/(u+a.height)));return this.state.inViewport||(this.setState({inViewport:d}),n({progress:f,velocity:m},this)),o({progress:f,velocity:m},this),void this.setState({lastScrollPosition:p,lastScrollTime:Date.now()})}if(this.state.inViewport){var b=a.top<=u?1:0;this.setState({lastScrollPosition:p,lastScrollTime:Date.now(),inViewport:d,progress:b}),o({progress:b,velocity:m},this),r({progress:b,velocity:m},this)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.component,o=c.a.isValidElement(r)?"cloneElement":"createElement";return c.a[o](r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(g.a)(this.props,["onProgress"]),{ref:function(t){e.element=t}}),n)}}]),t}(a.Component);y.defaultProps={component:"div",containerRef:"undefined"!==typeof document?document.documentElement:"html",throttleResize:100,throttleScroll:100,triggerOnLoad:!0,onEnter:function(){},onExit:function(){},onProgress:function(){}};var O=y;n(20);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var R={height:"400px",overflow:"scroll",border:"1px dashed black"},j={height:"300px",width:"300px",border:"2px solid blue"},w=6,T="\n    /** \n     * Scrollable div container is needed\n     * \n     * We need the 'ref' from this container div, since this component will be loaded before our 'ref',\n     * is ready I find it easier to store the 'ref' in state. \n     */\n    \n    const [myRef, setMyRef] = useState();\n    \n    <div ref={r => setMyRef(r)} style={{ height: '300px', overflow: 'scroll'}}>\n        \n        {/** \n          * ScrollTrigger must use the 'ref' inside of the 'containerRef' prop!\n          *  \n          * Use an array of components. This allows you to trigger when a component\n          * becomes visible within the scrollable div \n          */}\n        {myObjects.map((obj, index) => {\n            return (\n                <ScrollTrigger                     \n                    containerRef={myRef} \n                    onEnter={e => alert(`${obj.attribute} at index ${index} is now visible inside scrollable div!`)} \n                    onExit={e => alert(`${obj.attribute} at index ${index} is no longer visible inside scrollable div!`)} \n                    onProgress={e => alert(`${obj.attribute} Progress: ${e}`)} \n                    key={`${obj.attribute}_${index}`} \n                >\n                    <SomeOtherComponent someProp={obj.attribute} />\n                </ScrollTrigger>\n            )\n        })}\n    </div>\n";function z(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)({}),i=Object(m.a)(o,2),l=i[0],s=i[1],u=Object(a.useState)(),h=Object(m.a)(u,2),f=h[0],b=h[1],v=Object(a.useState)(),g=Object(m.a)(v,2),E=g[0],y=g[1],z=Object(a.useState)(),P=Object(m.a)(z,2),L=P[0],k=P[1];Object(a.useEffect)(function(){!function(){var e=document.getElementById("placeholder_for_scroll_bottom"),t=document.getElementById("placeholder_for_scroll_top");setTimeout(function(){e.scrollIntoView()},800),setTimeout(function(){t.scrollIntoView()},1e3)}()},[]);var C,x=function(e){return function(t){var o=[].concat(Object(p.a)(n),[e]).sort();r(o)}},I=function(e){return function(t){var o=n.filter(function(t){return t!==e});o.sort(),r(o)}},_=function(e){return function(t){var n="Panel_".concat([e]);s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},l,Object(d.a)({},n,t)))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:function(e){return k(e)},style:R},c.a.createElement("div",{id:"placeholder_for_scroll_top"})," ",c.a.createElement("div",{className:"sticky"},c.a.createElement("pre",null,"VisiblePanels: ",JSON.stringify(n,null,2)),c.a.createElement("pre",null,"ProgressData: ",JSON.stringify(l,null,2))),Array.from(new Array(w),function(e,t){return c.a.createElement(O,{containerRef:L,onEnter:x(t),onExit:I(t),onProgress:_(t)},c.a.createElement("div",{style:j},"Panel_",t))}),c.a.createElement("div",{id:"placeholder_for_scroll_bottom"})," "),c.a.createElement("div",{className:"ta-center"},c.a.createElement("h2",null,"I wanted a way to be able to key on nested ",c.a.createElement("code",null,"div"),"'s within a ",c.a.createElement("code",null,"div"),", which was not possible before."),c.a.createElement("h2",null,"I made this demo to show how you can track ",c.a.createElement("code",null,"div"),"'s within a scrollable ",c.a.createElement("code",null,"div"),", while still keeping the original functionality in tact."),c.a.createElement("h2",null,'If you scroll to the *very* bottom of this page, you can test out "regular" functionality.'),c.a.createElement("h2",null,"You can find the code for this demo ",c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/oze4/react-scroll-trigger-container"},"at the following location..."))),c.a.createElement("div",null,c.a.createElement("h2",null,"Example:"),c.a.createElement("pre",null,T)),Array.from(new Array(30),function(e,t){return c.a.createElement("p",{key:t},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse scelerisque, lectus in pharetra blandit, augue mauris pulvinar erat, ut euismod nibh lectus sed diam. Nulla fringilla ultrices ligula. Aliquam vitae felis metus. Maecenas lacinia bibendum accumsan. Curabitur lobortis convallis purus non imperdiet. Morbi ut vulputate mauris. Curabitur lacinia faucibus volutpat. Nulla elit tortor, rhoncus ut luctus eget, blandit in risus. Integer accumsan ullamcorper lorem id porttitor. Aliquam vitae libero eget magna mollis gravida.")}),c.a.createElement(O,{onEnter:(C="HIII",function(e){b("Setting message..."),setTimeout(function(){b(C)},1200)}),onProgress:function(e){y(e)}},c.a.createElement("div",{style:{height:"100vh"}},c.a.createElement("h1",null,"HIIIII"),c.a.createElement("pre",null,"onEnter('",f,"')"),c.a.createElement("pre",null,JSON.stringify(E,null,2)))))}var P=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(i.a)(this,Object(l.a)(t).call(this))).state={name:"React"},e}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(z,null))}}]),t}(a.Component);Object(u.render)(c.a.createElement(P,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ea76341d.chunk.js.map